let pokemonRepository=function(){const t=[],e=document.getElementById("pokemon-list"),n=document.getElementById("detailsModalLabel"),i=document.getElementById("detailsModalBody");function s(e){t.push(e)}function a(t){return t.height&&t.types&&t.imageUrl?Promise.resolve():fetch(t.detailsUrl).then((t=>t.json())).then((e=>{t.imageUrl=e.sprites.front_default,t.height=e.height,t.types=e.types.map((t=>t.type.name))})).catch((t=>console.error(t)))}function o(t){return t?t.charAt(0).toUpperCase()+t.slice(1):t}return{add:s,getAll:function(){return t},loadList:function(){return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150").then((t=>t.json())).then((t=>{t.results.forEach((t=>{s({name:t.name,detailsUrl:t.url})}))})).catch((t=>console.error(t)))},loadDetails:a,addListItem:function(t){const s=document.createElement("li");s.classList.add("list-group-item","d-flex","justify-content-between","align-items-center");const l=document.createElement("span");l.textContent=o(t.name);const r=document.createElement("button");r.type="button",r.classList.add("btn","btn-primary","btn-sm"),r.textContent="Details",r.setAttribute("data-bs-toggle","modal"),r.setAttribute("data-bs-target","#detailsModal"),r.setAttribute("aria-label",`Details for ${o(t.name)}`),r.addEventListener("click",(async()=>{r.disabled=!0;try{await async function(t){!function(t){n.textContent=`Loading ${o(t.name)}â€¦`,i.setAttribute("aria-busy","true"),i.innerHTML='\n      <div class="poke-grid">\n        <div class="poke-art">\n          <div class="spinner-border" role="status" aria-label="Loading"></div>\n        </div>\n        <div>\n          <div class="skeleton skel-line" style="width: 60%"></div>\n          <div class="skeleton skel-line" style="width: 40%"></div>\n          <div class="skeleton skel-line" style="width: 80%"></div>\n          <div class="skeleton skel-line" style="width: 50%"></div>\n        </div>\n      </div>\n    '}(t);try{await a(t);!function(t,e){const s=(t.height/10).toFixed(1);n.textContent=o(t.name);const a=t.types&&t.types.length?t.types.join(", "):"Unknown";i.innerHTML=`\n      <div class="poke-grid">\n        <div class="poke-art">\n          ${e?`<img src="${e}" alt="${o(t.name)} sprite" class="img-fluid rounded">`:'<div class="text-muted">No image</div>'}\n        </div>\n        <div>\n          <p class="mb-1"><strong>Height:</strong> ${s} m</p>\n          <p class="mb-1"><strong>Types:</strong> ${a}</p>\n        </div>\n      </div>\n    `,i.removeAttribute("aria-busy")}(t,await function(t){return new Promise(((e,n)=>{if(!t)return e(null);const i=new Image;i.onload=()=>e(t),i.onerror=n,i.src=t}))}(t.imageUrl).catch((()=>null)))}catch(t){console.error(t),n.textContent="Error loading details",i.innerHTML='\n        <div class="alert alert-danger" role="alert">\n          Could not load details. Please try again.\n        </div>\n      ',i.removeAttribute("aria-busy")}}(t)}finally{r.disabled=!1}})),s.appendChild(l),s.appendChild(r),e.appendChild(s)}}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(t){pokemonRepository.addListItem(t)}))}));